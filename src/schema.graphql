# import Address from './generated/prisma.graphql'

directive @isAuthenticated on FIELD | FIELD_DEFINITION
directive @isOwner on FIELD | FIELD_DEFINITION
directive @hasScope(scopes:[String]) on FIELD | FIELD_DEFINITION
directive @hasRole(roles: [String]) on FIELD | FIELD_DEFINITION 

scalar Email
scalar PhoneNumber
scalar Country
scalar Province
scalar PostalCode

type Query {
  profiles(gcId: String, name: String, email: Email, mobilephone: String, officePhone: String , titleEn: String, titleFr: String, skip: Int, first: Int): [Profile!]! @isAuthenticated,
  addresses(id: ID, streetAddress: String, city: String, province: String, postalCode: String, country: String, skip: Int, first: Int): [Address!]! @isAuthenticated,
  orgtiers(id: ID, nameEn: String, nameFr: String, skip: Int, first: Int): [OrgTier!]! @isAuthenticated,
  organizations(id: ID, nameEn: String, nameFr: String, acronymEn: String, acronymFr: String, skip: Int, first: Int): [Organization!]! @isAuthenticated,
}

type Mutation {
  createProfile(gcId: String!, name: String!, email: Email!, avatar: String, mobilePhone: PhoneNumber, officePhone: PhoneNumber, titleEn: String, titleFr: String, address: AddressInput, supervisor: SupervisorInput, org: OrgTierInput): Profile!,
  modifyProfile(gcId: String!, name: String, email: Email, titleEn: String, titleFr: String, mobilePhone: PhoneNumber, officePhone: PhoneNumber, address: AddressInput, supervisor: SupervisorInput, org: OrgTierInput): Profile! @isOwner,
  deleteProfile(gcId: String!): Boolean!,
  createOrgTier(nameEn: String!, nameFr: String!, organization: OrganizationInput , owner: OrgTierOwnerInput): OrgTier!,
  modifyOrgTier(id: ID!, nameEn: String, nameFr: String, organization: OrganizationInput, owner: OrgTierOwnerInput): OrgTier!
  deleteOrgTier(id: ID!): String!,
  createOrganization(nameEn: String!, nameFr: String!, acronymEn: String!, acronymFr: String!): Organization!,
  modifyOrganization(organizationId: ID!, nameEn: String, nameFr: String, acronymEn: String, acronymFr: String): Organization!,
  deleteOrganization(id: ID!): String!,
}

type Profile {
  gcId: String! 
  name: String!
  email: Email! 
  avatar: String
  mobilePhone: PhoneNumber
  officePhone: PhoneNumber
  address: Address
  titleEn: String
  titleFr: String
  supervisor: Profile 
  org: OrgTier     
}

type OrgTier {
  id: ID! 
  nameEn: String!
  nameFr: String!
  organization: Organization!
  ownerID: Profile
  members: [Profile!]!
}

type Organization {
  id: ID! 
  nameEn: String!
  nameFr: String!
  acronymEn: String!
  acronymFr: String!
  orgTiers: [OrgTier!]!
}

input SupervisorInput {
  gcId: String,
  email: Email
}

input OrgTierOwnerInput {
  gcId: String,
  email: Email
}

input OrgTierInput {
  id: ID!
}

input OrganizationInput {
  id: ID!
}

input AddressInput {
  streetAddress: String
  city: String
  province: String
  postalCode: String
  country: Country
}